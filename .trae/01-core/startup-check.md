---
name: Pre-Task Checklist
description: 任务前置检查 - 每次任务开始时强制执行
version: "1.0"
priority: 100
alwaysApply: true
trigger: "before_any_task"
---

# 任务前置检查清单

> **⚠️ 强制规则：在执行任何任务前必须完成以下检查**

---

## 一、任务分类检查

```yaml
收到用户请求后，立即判断任务类型:

分析类任务 (Plan模式):
  关键词:
    - "分析..."
    - "评估..."
    - "比较..."
    - "如何..."
    - "为什么..."
    - "趋势..."
    - "预测..."
  
  必须动作:
    1. ✅ 先展示问题解决计划
    2. ✅ 说明分析框架
    3. ✅ 列出信息来源
    4. ✅ 再执行具体操作

实现类任务 (Build模式):
  关键词:
    - "实现..."
    - "创建..."
    - "修复..."
    - "添加..."
    - "删除..."
  
  可选动作:
    - 简单任务直接执行
    - 复杂任务先展示计划
```

---

## 二、复杂度判断标准

```yaml
复杂任务判定 (必须展示Plan):
  
  多步骤任务:
    - 需要3个以上操作步骤
    - 涉及多个文件修改
    - 需要多个工具配合
  
  信息收集任务:
    - 需要搜索外部信息
    - 需要读取多个文件
    - 需要综合分析
  
  决策支持任务:
    - 涉及选择判断
    - 需要权衡利弊
    - 影响范围较大

简单任务判定 (可直接执行):
  
  单一操作:
    - 读取单个文件
    - 回答简单问题
    - 执行单一命令
  
  明确指令:
    - 用户指令清晰
    - 无需额外分析
    - 执行路径明确
```

---

## 三、Plan展示模板

```markdown
## 📋 问题解决计划

### 1. 问题理解
- 核心问题：[描述]
- 隐含需求：[分析]

### 2. 任务分解
| 阶段 | 任务 | 工具 | 预期输出 |
|-----|------|------|---------|
| 1 | ... | ... | ... |

### 3. 执行计划
[流程图或步骤说明]

### 4. 预期输出
[结果结构]
```

---

## 四、强制检查流程

```
用户请求
    ↓
┌─────────────────────┐
│ 任务类型判断        │
│ (分析/实现/其他)    │
└─────────────────────┘
    ↓
┌─────────────────────┐
│ 复杂度判断          │
│ (简单/复杂)         │
└─────────────────────┘
    ↓
┌─────────────────────┐
│ 是否需要Plan？      │
└─────────────────────┘
    ↓         ↓
  是         否
    ↓         ↓
展示Plan   直接执行
    ↓
执行任务
    ↓
输出结果
```

---

## 五、违规检测

```yaml
以下情况视为违规:
  
  - 分析类任务直接执行，未展示Plan
  - 复杂任务未分解步骤
  - 未说明信息来源
  - 未展示思考过程

违规后果:
  - 输出质量下降
  - 用户信任降低
  - 需要重新执行
```

---

## 六、快速参考卡

```
┌─────────────────────────────────────────────┐
│           任务前置检查速查表                 │
├─────────────────────────────────────────────┤
│                                             │
│  任务类型？                                  │
│    ├─ 分析类 → Plan模式 → 先展示计划        │
│    ├─ 实现类 → Build模式 → 复杂则展示计划   │
│    └─ 其他 → 判断复杂度                     │
│                                             │
│  复杂度？                                    │
│    ├─ 多步骤/多文件/多工具 → 复杂 → 展示Plan │
│    └─ 单一操作/明确指令 → 简单 → 直接执行   │
│                                             │
│  Plan模板：问题理解 → 任务分解 → 执行计划   │
│                                             │
└─────────────────────────────────────────────┘
```

---

**记住**：这个检查必须在任何任务执行前完成，不可跳过！
