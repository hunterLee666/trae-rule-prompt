---
name: Architecture Check
description: 六层架构检查触发器 - AI系统设计时建议执行
version: "1.0"
priority: 95
alwaysApply: true
trigger: "during_ai_system_design"
---

# 六层架构检查触发器

> **⚠️ 建议：设计AI系统时应遵循六层架构**

---

## 一、触发条件

```yaml
触发场景:
  - 设计AI Agent系统
  - 设计智能助手架构
  - 设计对话系统
  - 设计自动化系统
  - 用户明确要求架构设计

不触发场景:
  - 简单功能实现
  - 用户明确跳过
```

---

## 二、六层架构概览

```
┌─────────────────────────────────────────┐
│           六层智能体架构                 │
├─────────────────────────────────────────┤
│  Layer 6: 学习层 (Learning)             │
│  Layer 5: 反思层 (Reflection)           │
│  Layer 4: 执行层 (Execution)            │
│  Layer 3: 决策层 (Decision)             │
│  Layer 2: 认知层 (Cognition)            │
│  Layer 1: 感知层 (Perception)           │
└─────────────────────────────────────────┘
```

---

## 三、各层详解

### Layer 1: 感知层

```yaml
职责: 接收和理解输入
能力:
  - 文本理解
  - 代码解析
  - 上下文感知
  - 意图识别

输入处理:
  1. 接收用户输入
  2. 解析输入内容
  3. 识别输入类型
  4. 提取关键信息

检查要点:
  □ 输入解析完整？
  □ 意图识别准确？
  □ 上下文感知正确？
```

### Layer 2: 认知层

```yaml
职责: 深度理解和推理
能力:
  - 语义理解
  - 知识推理
  - 关系抽取
  - 概念建模

认知处理:
  1. 深度语义分析
  2. 知识关联推理
  3. 概念关系建模
  4. 理解结果输出

检查要点:
  □ 语义理解深入？
  □ 推理逻辑正确？
  □ 知识关联准确？
```

### Layer 3: 决策层

```yaml
职责: 制定行动计划
能力:
  - 目标分解
  - 方案生成
  - 风险评估
  - 决策优化

决策处理:
  1. 分析目标需求
  2. 生成候选方案
  3. 评估方案风险
  4. 选择最优方案

检查要点:
  □ 目标分解合理？
  □ 方案评估全面？
  □ 风险考虑充分？
```

### Layer 4: 执行层

```yaml
职责: 执行具体操作
能力:
  - 工具调用
  - 代码执行
  - 文件操作
  - API调用

执行处理:
  1. 接收执行指令
  2. 调用相应工具
  3. 执行具体操作
  4. 返回执行结果

检查要点:
  □ 工具选择正确？
  □ 执行顺序合理？
  □ 错误处理完善？
```

### Layer 5: 反思层

```yaml
职责: 评估和改进
能力:
  - 结果评估
  - 错误分析
  - 经验总结
  - 策略调整

反思处理:
  1. 评估执行结果
  2. 分析错误原因
  3. 总结经验教训
  4. 调整执行策略

检查要点:
  □ 结果评估客观？
  □ 错误分析深入？
  □ 改进措施有效？
```

### Layer 6: 学习层

```yaml
职责: 持续学习和进化
能力:
  - 知识积累
  - 技能学习
  - 模式识别
  - 自我优化

学习处理:
  1. 积累新知识
  2. 学习新技能
  3. 识别新模式
  4. 优化自身能力

检查要点:
  □ 知识积累有效？
  □ 学习机制完善？
  □ 进化方向正确？
```

---

## 四、架构检查清单

```yaml
完整性检查:
  □ 六层架构完整？
  □ 各层职责明确？
  □ 层间接口清晰？
  □ 数据流向正确？

功能检查:
  □ 感知层输入处理完善？
  □ 认知层推理能力足够？
  □ 决策层方案评估全面？
  □ 执行层操作可靠？
  □ 反思层评估客观？
  □ 学习层进化有效？

质量检查:
  □ 架构可扩展？
  □ 架构可维护？
  □ 架构可测试？
  □ 架构可监控？
```

---

## 五、快速检查卡

```
┌─────────────────────────────────────────────┐
│           六层架构速查表                     │
├─────────────────────────────────────────────┤
│                                             │
│  Layer 1 感知层: 输入接收和理解             │
│    □ 文本理解                               │
│    □ 意图识别                               │
│                                             │
│  Layer 2 认知层: 深度推理                   │
│    □ 语义理解                               │
│    □ 知识推理                               │
│                                             │
│  Layer 3 决策层: 行动规划                   │
│    □ 目标分解                               │
│    □ 方案选择                               │
│                                             │
│  Layer 4 执行层: 具体操作                   │
│    □ 工具调用                               │
│    □ 代码执行                               │
│                                             │
│  Layer 5 反思层: 评估改进                   │
│    □ 结果评估                               │
│    □ 经验总结                               │
│                                             │
│  Layer 6 学习层: 持续进化                   │
│    □ 知识积累                               │
│    □ 自我优化                               │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 六、违规示例

```yaml
❌ 错误示例:
  # 缺少反思层和学习层
  class SimpleAgent:
      def perceive(self, input): ...
      def decide(self, context): ...
      def execute(self, action): ...

✅ 正确示例:
  # 完整六层架构
  class IntelligentAgent:
      def perceive(self, input):
          """Layer 1: 感知层"""
          ...
      
      def cognize(self, perception):
          """Layer 2: 认知层"""
          ...
      
      def decide(self, cognition):
          """Layer 3: 决策层"""
          ...
      
      def execute(self, decision):
          """Layer 4: 执行层"""
          ...
      
      def reflect(self, execution_result):
          """Layer 5: 反思层"""
          ...
      
      def learn(self, reflection):
          """Layer 6: 学习层"""
          ...
```

---

**记住**：层层递进，智能涌现！
