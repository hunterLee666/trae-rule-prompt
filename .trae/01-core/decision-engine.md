---
name: Decision Engine
description: 决策引擎 - 多因素智能决策系统
version: "7.0"
priority: 95
alwaysApply: true
---

# 决策引擎

> **"综合考量，明智决策。"**

## 一、决策框架

```yaml
决策维度:
  复杂度: 25%
  风险: 20%
  资源: 15%
  时间: 15%
  质量: 15%
  用户偏好: 10%
```

## 二、决策流程

```yaml
标准决策流程:
  1. 信息收集
     - 理解用户需求
     - 收集上下文信息
     - 识别约束条件
     
  2. 方案生成
     - 生成多个候选方案
     - 评估每个方案
     - 筛选可行方案
     
  3. 方案评估
     - 多维度评分
     - 加权计算总分
     - 排序候选方案
     
  4. 决策输出
     - 推荐最优方案
     - 说明决策依据
     - 提供备选方案
```

## 三、复杂度评估

```yaml
评估因素:
  代码规模:
    - 预估代码行数
    - 文件数量
    - 模块数量
    
  逻辑深度:
    - 条件分支数
    - 循环嵌套层数
    - 递归深度
    
  依赖关系:
    - 内部依赖数
    - 外部依赖数
    - 跨模块调用
    
  影响范围:
    - 影响文件数
    - 影响模块数
    - 影响用户数

复杂度等级:
  简单 (0-0.3): 单文件、无依赖、逻辑简单
  中等 (0.3-0.6): 多文件、少量依赖、中等逻辑
  复杂 (0.6-0.8): 多模块、复杂依赖、深度逻辑
  极复杂 (0.8-1.0): 跨系统、高度耦合、架构级
```

## 四、风险评估

```yaml
风险类型:
  技术风险:
    - 技术可行性
    - 技术债务
    - 兼容性问题
    
  业务风险:
    - 功能影响
    - 用户体验
    - 数据安全
    
  时间风险:
    - 延期风险
    - 依赖阻塞
    - 资源不足

风险等级:
  低 (0-0.3): 影响可控、有成熟方案
  中 (0.3-0.6): 有一定影响、需要验证
  高 (0.6-0.8): 影响较大、需要评审
  极高 (0.8-1.0): 影响重大、需要批准
```

## 五、资源评估

```yaml
资源类型:
  人力:
    - 开发时间
    - 测试时间
    - 审查时间
    
  计算:
    - CPU使用
    - 内存占用
    - 存储空间
    
  网络:
    - 带宽消耗
    - API调用
    - 数据传输

资源等级:
  低 (0-0.3): 资源充足
  中 (0.3-0.6): 资源适中
  高 (0.6-0.8): 资源紧张
  极高 (0.8-1.0): 资源受限
```

## 六、决策矩阵

```yaml
决策规则:
  复杂度 > 0.8:
    → 使用ultrabrain模型
    → 启用Plan模式
    → 生成详细方案
    
  风险 > 0.7:
    → 需要用户确认
    → 生成风险评估
    → 提供回滚方案
    
  资源 > 0.7:
    → 优化资源使用
    → 分步执行
    → 监控资源消耗
    
  时间敏感:
    → 选择快速方案
    → 并行执行
    → 简化流程
```

## 七、决策输出

```markdown
## 🎯 决策报告

### 推荐方案
[方案描述]

### 决策依据
| 维度 | 评分 | 权重 | 加权分 |
|-----|------|------|-------|
| 复杂度 | X | 25% | X |
| 风险 | X | 20% | X |
| 资源 | X | 15% | X |
| 时间 | X | 15% | X |
| 质量 | X | 15% | X |
| 用户偏好 | X | 10% | X |
| **总分** | - | 100% | X |

### 备选方案
1. [方案A] - 总分: X
2. [方案B] - 总分: X

### 风险提示
[潜在风险和应对措施]
```
