---
name: Completeness Check Trigger
description: 完整性检查触发器 - 任务完成后强制执行
version: "1.0"
priority: 90
alwaysApply: true
trigger: "after_task_complete"
---

# 完整性检查触发器

> **⚠️ 强制规则：任务完成后必须执行完整性检查**

---

## 一、触发条件

```yaml
触发场景:
  - 代码实现任务完成后
  - 功能开发任务完成后
  - Bug修复任务完成后
  - 重构任务完成后
  - 用户明确要求检查时

不触发场景:
  - 简单信息查询
  - 文件读取请求
  - 用户明确跳过检查
```

---

## 二、完整性检查清单

### 2.1 功能完整性

```yaml
检查项:
  
  核心功能:
    □ 主要功能是否实现？
    □ 功能是否符合需求？
    □ 是否有遗漏的功能点？
  
  边界条件:
    □ 空值/空字符串处理？
    □ 边界值处理（0, -1, MAX）？
    □ 特殊字符处理？
    □ 并发场景处理？
  
  异常处理:
    □ 是否有try-catch？
    □ 异常是否被正确捕获？
    □ 错误信息是否友好？
    □ 是否有错误恢复机制？
  
  输入验证:
    □ 参数类型验证？
    □ 参数范围验证？
    □ 必填参数检查？
```

### 2.2 测试完整性

```yaml
检查项:
  
  单元测试:
    □ 是否有测试代码？
    □ 正常流程测试？
    □ 异常流程测试？
    □ 边界条件测试？
  
  测试覆盖:
    □ 核心逻辑是否覆盖？
    □ 分支是否覆盖？
    □ 异常路径是否覆盖？
```

### 2.3 文档完整性

```yaml
检查项:
  
  代码注释:
    □ 复杂逻辑是否有注释？
    □ 函数是否有文档字符串？
    □ 参数和返回值是否说明？
  
  使用文档:
    □ 是否有使用示例？
    □ 是否有配置说明？
    □ 是否有注意事项？
```

### 2.4 配置完整性

```yaml
检查项:
  
  配置文件:
    □ 是否有配置模板？
    □ 环境变量是否说明？
    □ 默认值是否合理？
  
  依赖管理:
    □ 依赖是否声明？
    □ 版本是否指定？
```

---

## 三、检查输出模板

```markdown
## ✅ 完整性检查报告

### 功能完整性
| 检查项 | 状态 | 说明 |
|-------|------|------|
| 核心功能 | ✅/❌ | ... |
| 边界条件 | ✅/❌ | ... |
| 异常处理 | ✅/❌ | ... |
| 输入验证 | ✅/❌ | ... |

### 测试完整性
| 检查项 | 状态 | 说明 |
|-------|------|------|
| 单元测试 | ✅/❌ | ... |
| 测试覆盖 | ✅/❌ | ... |

### 文档完整性
| 检查项 | 状态 | 说明 |
|-------|------|------|
| 代码注释 | ✅/❌ | ... |
| 使用文档 | ✅/❌ | ... |

### 待改进项
- [ ] ...
- [ ] ...

### 完整性评分
总分: X/100
等级: Level X
```

---

## 四、完整性等级标准

```yaml
Level 5 - 完整 (90-100分):
  功能: 100%实现，边界处理完善
  测试: 覆盖率>90%
  文档: 全面的文档和示例
  配置: 完整的配置模板

Level 4 - 良好 (75-89分):
  功能: 核心功能完整，主要边界处理
  测试: 覆盖率>80%
  文档: 主要功能有文档
  配置: 基本配置模板

Level 3 - 合格 (60-74分):
  功能: 核心功能实现，基本边界处理
  测试: 覆盖率>60%
  文档: 基本文档
  配置: 配置说明

Level 2 - 基础 (40-59分):
  功能: 核心功能基本实现
  测试: 有基本测试
  文档: 有README
  配置: 有配置说明

Level 1 - 不完整 (<40分):
  功能: 功能不完整
  测试: 无测试
  文档: 无文档
  配置: 无配置
```

---

## 五、快速检查卡

```
┌─────────────────────────────────────────────┐
│           完整性检查速查表                   │
├─────────────────────────────────────────────┤
│                                             │
│  功能完整性:                                 │
│    □ 核心功能实现？                          │
│    □ 边界条件处理？                          │
│    □ 异常处理完善？                          │
│    □ 输入验证到位？                          │
│                                             │
│  测试完整性:                                 │
│    □ 有单元测试？                            │
│    □ 覆盖核心逻辑？                          │
│                                             │
│  文档完整性:                                 │
│    □ 代码有注释？                            │
│    □ 有使用示例？                            │
│                                             │
│  配置完整性:                                 │
│    □ 配置有模板？                            │
│    □ 依赖已声明？                            │
│                                             │
│  目标: Level 3以上 (合格)                    │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 六、违规示例

```yaml
❌ 错误示例:
  - 实现功能后直接结束，不检查边界条件
  - 没有异常处理
  - 没有测试代码
  - 没有使用说明

✅ 正确示例:
  - 实现功能 → 检查边界 → 添加异常处理 → 编写测试 → 添加文档
  - 输出完整性检查报告
  - 标注待改进项
```

---

**记住**：任务完成不等于工作结束，完整性检查是质量保障的关键！
