---
name: Privacy Architecture
description: 隐私架构 - 隐私优先设计原则
version: "7.0"
priority: 100
alwaysApply: true
---

# 隐私架构

> **"隐私优先，安全为本。"**

## 一、隐私原则

```yaml
核心原则:
  1. 本地优先处理:
     - 尽可能在本地处理数据
     - 使用本地模型 (Ollama, LM Studio)
     - 最小化网络请求
     
  2. 数据最小化:
     - 只收集必要数据
     - 只发送必要代码片段
     - 敏感信息脱敏
     
  3. 用户控制:
     - 用户决定数据共享范围
     - 可配置隐私级别
     - 随时撤销授权
     
  4. 透明度:
     - 清晰说明数据流向
     - 公开数据处理政策
     - 提供审计能力
```

## 二、隐私级别

```yaml
strict (严格):
  特点:
    - 仅使用本地模型
    - 禁止云端处理
    - 完整审计日志
  适用:
    - 敏感项目
    - 合规要求高
    - 数据不可外传

balanced (平衡):
  特点:
    - 优先本地处理
    - 云端处理前询问
    - 标准审计日志
  适用:
    - 常规开发
    - 一般敏感度
    - 需要灵活性

relaxed (宽松):
  特点:
    - 自动选择最优方案
    - 允许云端处理
    - 最小日志记录
  适用:
    - 非敏感项目
    - 开源项目
    - 快速迭代
```

## 三、敏感数据处理

### 3.1 敏感数据类型

```yaml
Credentials:
  - API密钥
  - 密码
  - 私钥
  - 访问令牌

Personal:
  - 个人身份信息(PII)
  - 联系信息
  - 地理位置

Proprietary:
  - 商业机密
  - 算法实现
  - 专有配置
```

### 3.2 脱敏规则

```yaml
检测规则:
  文件名模式:
    - .env
    - *.key
    - *.pem
    - credentials*
    - secrets*
    
  内容模式:
    - API_KEY=*
    - password=*
    - token=*
    - secret=*

脱敏格式:
  - API_KEY=***
  - password: [REDACTED]
  - token: <HIDDEN>
```

## 四、数据流向

```yaml
本地处理:
  用户输入 → 本地模型 → 本地输出
  (无网络传输)

云端处理:
  用户输入 → 脱敏处理 → 云端模型 → 本地输出
  (敏感信息已脱敏)

数据保留:
  - 不保留用户代码
  - 不保留敏感信息
  - 仅保留必要的操作日志
```

## 五、安全检查

```yaml
检查时机:
  - 文件访问前
  - 数据发送前
  - 命令执行前

检查内容:
  - 敏感文件检测
  - 敏感内容检测
  - 权限验证

处理方式:
  - 检测到敏感信息:
    1. 提示用户
    2. 自动脱敏
    3. 或取消操作
```

## 六、最佳实践

```yaml
配置建议:
  - 默认使用balanced级别
  - 敏感项目使用strict级别
  - 定期审查隐私设置

操作建议:
  - 不在代码中硬编码密钥
  - 使用环境变量
  - 定期轮换密钥

审计建议:
  - 定期检查审计日志
  - 关注异常访问
  - 及时处理安全事件
```
